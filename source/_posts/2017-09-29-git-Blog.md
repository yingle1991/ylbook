---
layout:     post
title:      "忆开发中的坏习惯"
subtitle:   "----程序员的致命坏习惯"
date:       2017-09-29
author:     "ZYL"
header-img: "img/xiguan.jpg"
tags:
    - 笔记
---

昨天晚上项目更新上线，以我这大大咧咧的性格当然是比较繁琐、麻烦了，先总结出错的地方 以记录改正。

----------
项目开发周期无非涉及日常开发（前、后台部分）、数据库表结构、视图、函数的修改，测试环境部署branches ->trunk 现在整理一下每个过程需要注意的地方

日常开发部分：

1. 每天第一件事先从svn down 下最新代码包
2. 确定连接开发库，忌讳连接本地库以及正式库
3. 确定与项目组成员修改不同功能模块尤其前后台分离的项目
4. 记录修改了哪些前台模块 以备正式发布导出

数据库表结构、视图、函数的修改

1. 表结构、视图的新建修改一定要记录！记录！记录（我吃了很大亏）
2. 对于函数尽可能的记录函数干嘛的，不要重复建立，尽可能的复用：这里我要多说一句统计函数尽可能独立建立，缩减查询列，对于大数据是很消耗资源的
3. 避免使用*

测试环境部署branches

1. 前后台一定同步更新，改动少可以class 部署
2. war 包部署，注意上传文件的保护

发布准备

1. 每个程序员分别导出自己修改的几个wb模块；
2. 每个程序员记住自己的数据库修改内容，包括：修改的表字段、表、视图、函数、存储过程、序列、索引等；
3. 每个程序员记住自己的项目内容的修改，包括：可配置的键值内容的修改、新增功能授权给哪些人、工作流的配置修改等；
4. 如果涉及到批量更新数据，需要写好sql，在测试环境中测试通过。

正式环境操作

1. 备份
①备份正式数据库
②导出现有的所有wb模块
2. 将svn的“开发分支”合并到“trunk主分支”上，注意相关数据库地址、微信地址等需要是正式地址；导出war包，或者导出编译后的增量变化的内容；
3. 发布之前，预估一下发布的时间，通知客户停止使用；
4. 进行内容发布
（1）java程序（如果服务器有多台，需要多台上都进行如下操作）
①备份正式服务器上tomcat下的项目目录；
②将增量变化的内容复制到测试服务器上tomcat下的项目目录中，覆盖已有的内容，重启tomcat（如果只修改jsp不需要重启）
如果导出的是war包，可将war包放到与项目目录同级的目录下，删除原有的项目目录【注意附件等内容】
（2）数据库内容
按照事前的整理，进行数据库内容的修改，包括批量更新数据
（3）wb模块
①按照事前的整理，进行多个wb模块的导入
②登录集成开发环境，进行模块更新（如果服务器有多台，需要多台上都进行如下操作）
（4）项目内容的修改
按照事前的整理，进行项目内容的修改
5. 发布后，进行测试；
6. 测试通过后，通知客户重新登录使用。




纯属开发笔记，有啥补充尽可联系我~
yingle1991@gmail.com